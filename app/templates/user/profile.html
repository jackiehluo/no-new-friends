{% extends "base.html" %}

{% block content %}

<h1>
  {{user.first_name}} {{user.last_name}}
  <div class="pull-right">
    {% if user == current_user %}
      <a class="btn btn-primary" href="{{ url_for('user.edit') }}" role="button">Edit Profile</a>
    {% else %}
      <a class="btn btn-primary" href="{{ url_for('user.contact', id=user.id) }}" role="button">Message</a>
    {% endif %}
  </div>
</h1><br>


<table class="table">
  <tr>
    <td width="200">
      {% if user.has_facebook() %}
        <p><img src="{{ user.picture(200, 200) }}"></p>
      {% else %}
        <p><img src="/static/grey.jpg"></p>
      {% endif %}
    </td>
    <td>
      <p>
        <strong>Major</strong>: {{user.major}}<br>
        <strong>Interests</strong>: {{user.interests}}<br>
      </p>
      <p>
        {% if user.has_facebook() %}
          <a href="http://www.facebook.com/{{ user.facebook }}" class="btn btn-default btn-xs" target="_blank">Facebook</a>
        {% else %}
          {% if user == current_user %}
            <a href="{{ user.id }}/login/fb" class="btn btn-primary btn-xs">Add Facebook Profile Picture/Link</a>
          {% endif %}
        {% endif %}
        {% if user.has_instagram() %}
          <a href="http://www.instagram.com/{{ user.instagram }}" class="btn btn-default btn-xs" target="_blank">Instagram</a>
        {% endif %}
        {% if user.has_twitter() %}
          <a href="http://www.twitter.com/{{ user.twitter }}" class="btn btn-default btn-xs" target="_blank">Twitter</a>
        {% endif %}
      </p>
      {% if user.has_about_me() %}
        <h4>{{user.about_me}}</h4>
      {% endif %}
    </td>
    </tr>
</table>

{% if user == current_user %}
  <h3>Change Password</h3>
  <form class="form-reset" role="form" method="post" action="">
    {{ form.csrf_token }}
    <p>
      {{ form.password(placeholder="New Password") }}
      <span class="error">
        {% if form.password.errors %}
          {% for error in form.password.errors %}
            {{ error }}
          {% endfor %}
        {% endif %}
      </span>
    </p>
    <p>
    {{ form.confirm(placeholder="Confirm") }}
      <span class="error">
        {% if form.confirm.errors %}
          {% for error in form.confirm.errors %}
            {{ error }}
          {% endfor %}
        {% endif %}
      </span>
    </p>
    <button class="btn btn-success" type="submit">Update</button>
  </form>
{% endif %}

{% endblock %}